<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Dominic's Timesheet 2025</title>
    <style>
        * { box-sizing: border-box; }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', system-ui, sans-serif;
            margin: 0;
            padding: 15px;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
        }

        .container {
            max-width: 1400px;
            margin: 0 auto;
            background: white;
            border-radius: 12px;
            box-shadow: 0 20px 40px rgba(0,0,0,0.15);
            overflow: hidden;
        }

        .header {
            background: linear-gradient(135deg, #4F81BD, #2F5F8F);
            color: white;
            padding: 20px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            position: relative;
            overflow: hidden;
        }

        .header::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 100 20"><defs><pattern id="grain" width="100" height="20" patternUnits="userSpaceOnUse"><circle cx="10" cy="5" r="1" fill="rgba(255,255,255,0.1)"/><circle cx="30" cy="15" r="0.5" fill="rgba(255,255,255,0.05)"/><circle cx="60" cy="8" r="0.8" fill="rgba(255,255,255,0.08)"/><circle cx="80" cy="12" r="0.3" fill="rgba(255,255,255,0.03)"/></pattern></defs><rect width="100" height="20" fill="url(%23grain)"/></svg>');
            opacity: 0.6;
            z-index: 0;
        }

        .header::after {
            content: '';
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            width: 160px;
            height: 160px;
            background-image: url('https://www.absoluteprint.com/wp-content/uploads/2019/02/Absolute-Print-logo-type-e1549458070492.png');
            background-size: contain;
            background-repeat: no-repeat;
            background-position: center;
            opacity: 0.12;
            z-index: 0;
            pointer-events: none;
        }

        .header > * { position: relative; z-index: 1; }

        .header h1 { margin: 0; font-size: 24px; font-weight: 400; }

        .year-total { font-size: 28px; font-weight: bold; text-align: right; }

        .tabs {
            display: flex;
            background: #f8f9fa;
            border-bottom: 2px solid #e9ecef;
            overflow-x: auto;
        }

        .tab {
            padding: 12px 18px;
            cursor: pointer;
            border: none;
            background: none;
            font-size: 13px;
            font-weight: 500;
            color: #495057;
            transition: all 0.3s ease;
            white-space: nowrap;
            border-bottom: 3px solid transparent;
        }

        .tab:hover { background: #e9ecef; color: #4F81BD; }
        .tab.active { color: #4F81BD; background: white; border-bottom-color: #4F81BD; }

        .tab-content { display: none; padding: 20px; }
        .tab-content.active { display: block; }

        .month-summary {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(140px, 1fr));
            gap: 12px;
            margin-bottom: 20px;
            padding: 15px;
            background: linear-gradient(135deg, #667eea, #764ba2);
            color: white;
            border-radius: 8px;
        }

        .summary-item { text-align: center; }
        .summary-label { font-size: 11px; opacity: 0.85; margin-bottom: 4px; text-transform: uppercase; letter-spacing: 0.5px; }
        .summary-value { font-size: 18px; font-weight: bold; }

        .controls {
            display: flex;
            gap: 8px;
            margin-bottom: 15px;
            flex-wrap: wrap;
        }

        .btn {
            padding: 8px 14px;
            border: none;
            border-radius: 6px;
            cursor: pointer;
            font-size: 12px;
            font-weight: 500;
            transition: all 0.2s ease;
        }

        .btn-primary { background: #4F81BD; color: white; }
        .btn-primary:hover { background: #3d6fa3; }

        .btn-secondary { background: #6c757d; color: white; }
        .btn-secondary:hover { background: #5a6268; }

        .btn-success { background: #28a745; color: white; }
        .btn-success:hover { background: #218838; }

        .timesheet-table {
            width: 100%;
            border-collapse: collapse;
            font-size: 12px;
            box-shadow: 0 2px 8px rgba(0,0,0,0.08);
            border-radius: 8px;
            overflow: hidden;
        }

        .timesheet-table th {
            background: #4F81BD;
            color: white;
            padding: 10px 6px;
            text-align: center;
            font-weight: 600;
            font-size: 11px;
            text-transform: uppercase;
            letter-spacing: 0.3px;
        }

        .timesheet-table td {
            padding: 6px;
            border: 1px solid #e9ecef;
            text-align: center;
            vertical-align: middle;
        }

        .timesheet-table tr:nth-child(even):not(.total-row) { background: #fbfcfd; }
        .timesheet-table tr:hover:not(.total-row):not(.non-working-day) { background: #e8f4fd !important; }

        input {
            width: 100%;
            padding: 4px 6px;
            border: 1px solid #ddd;
            border-radius: 3px;
            font-size: 11px;
            background: white;
            font-family: inherit;
        }

        input[type="text"] { text-align: left; }
        input[type="checkbox"] { width: 16px; height: 16px; cursor: pointer; margin: 0; }
        input:focus { outline: none; border-color: #4F81BD; box-shadow: 0 0 0 2px rgba(79, 129, 189, 0.2); }

        .total-row { background: linear-gradient(135deg, #D9E1F2, #c5d2e8) !important; font-weight: bold; }
        .total-cell { background: linear-gradient(135deg, #FCE4D6, #f7d6c1) !important; font-weight: bold; color: #d63384; font-size: 13px; }

        .non-working-day { background: #f8f9fa !important; color: #6c757d; opacity: 0.75; }
        .non-working-day input:not([type="checkbox"]) { background: #e9ecef !important; color: #6c757d; cursor: not-allowed; }

        .hours-short { background: #ffe6e6 !important; color: #721c24; }
        .hours-good { background: #e6f7e6 !important; color: #155724; }
        .weekend { background: #f0f8ff !important; }

        .instructions {
            background: linear-gradient(135deg, #fff8dc, #ffeaa7);
            border: 1px solid #ffd700;
            border-radius: 6px;
            padding: 12px;
            margin-bottom: 15px;
            font-size: 13px;
            line-height: 1.4;
        }

        @media (max-width: 768px) {
            body { padding: 10px; }
            .header { flex-direction: column; gap: 10px; text-align: center; }
            .month-summary { grid-template-columns: repeat(2, 1fr); }
            .timesheet-table { font-size: 10px; }
            .timesheet-table th, .timesheet-table td { padding: 4px 3px; }
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <div>
                <h1>Dominic's Timesheet 2025</h1>
            </div>
            <div class="year-total" id="year-total">0.00 hrs</div>
        </div>

        <div class="tabs">
            <button class="tab active" onclick="showTab('january')">January</button>
            <button class="tab" onclick="showTab('february')">February</button>
            <button class="tab" onclick="showTab('march')">March</button>
            <button class="tab" onclick="showTab('april')">April</button>
            <button class="tab" onclick="showTab('may')">May</button>
            <button class="tab" onclick="showTab('june')">June</button>
            <button class="tab" onclick="showTab('july')">July</button>
            <button class="tab" onclick="showTab('august')">August</button>
            <button class="tab" onclick="showTab('september')">September</button>
            <button class="tab" onclick="showTab('october')">October</button>
            <button class="tab" onclick="showTab('november')">November</button>
            <button class="tab" onclick="showTab('december')">December</button>
        </div>

        <!-- January Tab -->
        <div id="january" class="tab-content active">
            <div class="instructions">
                <strong>üìã Quick Guide:</strong> Check ‚ùå for non-working days (holidays, sick days). Enter times for work days. 
                System auto-deducts 30min breaks for 9+ hour weekdays or 6.5+ hour Saturdays.
            </div>

            <div class="month-summary">
                <div class="summary-item">
                    <div class="summary-label">Month</div>
                    <div class="summary-value">January 2025</div>
                </div>
                <div class="summary-item">
                    <div class="summary-label">Hours</div>
                    <div class="summary-value" id="january-total">0.00</div>
                </div>
                <div class="summary-item">
                    <div class="summary-label">Days</div>
                    <div class="summary-value" id="january-days">0</div>
                </div>
                <div class="summary-item">
                    <div class="summary-label">Average</div>
                    <div class="summary-value" id="january-avg">0.00</div>
                </div>
            </div>

            <div class="controls">
                <button class="btn btn-primary" onclick="fillWeekdays('january')">‚è∞ Fill 9-6 Weekdays</button>
                <button class="btn btn-secondary" onclick="markHolidays('january')">üè¶ UK Holidays</button>
                <button class="btn btn-success" onclick="updateBossView()">üì§ Update Boss View</button>
            </div>

            <table class="timesheet-table">
                <thead>
                    <tr>
                        <th style="width: 45px;">‚ùå</th>
                        <th style="width: 85px;">Date</th>
                        <th style="width: 70px;">Day</th>
                        <th style="width: 80px;">Start</th>
                        <th style="width: 80px;">End</th>
                        <th style="width: 85px;">Raw</th>
                        <th style="width: 85px;">Paid</th>
                        <th style="width: 180px;">Notes</th>
                    </tr>
                </thead>
                <tbody id="january-body">
                    <!-- January days will be here -->
                </tbody>
            </table>
        </div>

        <!-- All other months will have the same structure -->
        <div id="february" class="tab-content">
            <div class="instructions">
                <strong>üìã Quick Guide:</strong> Check ‚ùå for non-working days (holidays, sick days). Enter times for work days. 
                System auto-deducts 30min breaks for 9+ hour weekdays or 6.5+ hour Saturdays.
            </div>

            <div class="month-summary">
                <div class="summary-item">
                    <div class="summary-label">Month</div>
                    <div class="summary-value">February 2025</div>
                </div>
                <div class="summary-item">
                    <div class="summary-label">Hours</div>
                    <div class="summary-value" id="february-total">0.00</div>
                </div>
                <div class="summary-item">
                    <div class="summary-label">Days</div>
                    <div class="summary-value" id="february-days">0</div>
                </div>
                <div class="summary-item">
                    <div class="summary-label">Average</div>
                    <div class="summary-value" id="february-avg">0.00</div>
                </div>
            </div>

            <div class="controls">
                <button class="btn btn-primary" onclick="fillWeekdays('february')">‚è∞ Fill 9-6 Weekdays</button>
                <button class="btn btn-secondary" onclick="markHolidays('february')">üè¶ UK Holidays</button>
                <button class="btn btn-success" onclick="updateBossView()">üì§ Update Boss View</button>
            </div>

            <table class="timesheet-table">
                <thead>
                    <tr>
                        <th style="width: 45px;">‚ùå</th>
                        <th style="width: 85px;">Date</th>
                        <th style="width: 70px;">Day</th>
                        <th style="width: 80px;">Start</th>
                        <th style="width: 80px;">End</th>
                        <th style="width: 85px;">Raw</th>
                        <th style="width: 85px;">Paid</th>
                        <th style="width: 180px;">Notes</th>
                    </tr>
                </thead>
                <tbody id="february-body"></tbody>
            </table>
        </div>

        <!-- Continue with all other months... -->
        <!-- I'll create the structure for all remaining months -->
    </div>

    <script>
        const monthNames = ['january', 'february', 'march', 'april', 'may', 'june', 
                           'july', 'august', 'september', 'october', 'november', 'december'];
        const daysInMonth = [31, 28, 31, 30, 31, 30, 31, 31, 30, 31, 30, 31];
        
        let timesheetData = {};

        // UK Bank Holidays 2025
        const holidays = {
            january: [{ day: 1, name: "New Year's Day" }],
            february: [],
            march: [],
            april: [{ day: 18, name: "Good Friday" }, { day: 21, name: "Easter Monday" }],
            may: [{ day: 5, name: "Early May Bank Holiday" }, { day: 26, name: "Spring Bank Holiday" }],
            june: [],
            july: [],
            august: [{ day: 25, name: "Summer Bank Holiday" }],
            september: [],
            october: [],
            november: [],
            december: [{ day: 25, name: "Christmas Day" }, { day: 26, name: "Boxing Day" }]
        };

        function createMonthContent(monthName, monthIndex) {
            if (monthIndex > 1) { // Skip January and February as they're already in HTML
                const monthDiv = document.getElementById(monthName);
                monthDiv.innerHTML = `
                    <div class="instructions">
                        <strong>üìã Quick Guide:</strong> Check ‚ùå for non-working days (holidays, sick days). Enter times for work days. 
                        System auto-deducts 30min breaks for 9+ hour weekdays or 6.5+ hour Saturdays.
                    </div>

                    <div class="month-summary">
                        <div class="summary-item">
                            <div class="summary-label">Month</div>
                            <div class="summary-value">${monthName.charAt(0).toUpperCase() + monthName.slice(1)} 2025</div>
                        </div>
                        <div class="summary-item">
                            <div class="summary-label">Hours</div>
                            <div class="summary-value" id="${monthName}-total">0.00</div>
                        </div>
                        <div class="summary-item">
                            <div class="summary-label">Days</div>
                            <div class="summary-value" id="${monthName}-days">0</div>
                        </div>
                        <div class="summary-item">
                            <div class="summary-label">Average</div>
                            <div class="summary-value" id="${monthName}-avg">0.00</div>
                        </div>
                    </div>

                    <div class="controls">
                        <button class="btn btn-primary" onclick="fillWeekdays('${monthName}')">‚è∞ Fill 9-6 Weekdays</button>
                        <button class="btn btn-secondary" onclick="markHolidays('${monthName}')">üè¶ UK Holidays</button>
                        <button class="btn btn-success" onclick="updateBossView()">üì§ Update Boss View</button>
                    </div>

                    <table class="timesheet-table">
                        <thead>
                            <tr>
                                <th style="width: 45px;">‚ùå</th>
                                <th style="width: 85px;">Date</th>
                                <th style="width: 70px;">Day</th>
                                <th style="width: 80px;">Start</th>
                                <th style="width: 80px;">End</th>
                                <th style="width: 85px;">Raw</th>
                                <th style="width: 85px;">Paid</th>
                                <th style="width: 180px;">Notes</th>
                            </tr>
                        </thead>
                        <tbody id="${monthName}-body"></tbody>
                    </table>
                `;
            }
        }

        function createMonthTimesheet(monthName, monthIndex) {
            const tbody = document.getElementById(`${monthName}-body`);
            tbody.innerHTML = '';

            const daysInThisMonth = daysInMonth[monthIndex];
            
            for (let day = 1; day <= daysInThisMonth; day++) {
                const date = new Date(2025, monthIndex, day);
                const dateStr = date.toLocaleDateString('en-GB');
                const dayName = date.toLocaleDateString('en-US', { weekday: 'long' });
                const isWeekend = date.getDay() === 0 || date.getDay() === 6;

                const row = document.createElement('tr');
                if (isWeekend) row.classList.add('weekend');
                
                row.innerHTML = `
                    <td><input type="checkbox" onchange="toggleNonWorking('${monthName}', ${day}, this)"></td>
                    <td>${dateStr}</td>
                    <td>${dayName}</td>
                    <td><input type="time" onchange="calculateHours('${monthName}', ${day})"></td>
                    <td><input type="time" onchange="calculateHours('${monthName}', ${day})"></td>
                    <td class="raw-hours">0.00</td>
                    <td class="hours-worked">0.00</td>
                    <td><input type="text" placeholder="Notes..."></td>
                `;
                
                tbody.appendChild(row);
            }

            // Add totals row
            const totalRow = document.createElement('tr');
            totalRow.classList.add('total-row');
            totalRow.innerHTML = `
                <td></td>
                <td colspan="4" style="text-align: right; font-weight: bold;">TOTAL:</td>
                <td class="total-cell" id="${monthName}-raw-total">0.00</td>
                <td class="total-cell" id="${monthName}-worked-total">0.00</td>
                <td></td>
            `;
            tbody.appendChild(totalRow);
        }

        function showTab(tabName) {
            // Hide all tabs
            document.querySelectorAll('.tab-content').forEach(content => {
                content.classList.remove('active');
            });
            document.querySelectorAll('.tab').forEach(tab => {
                tab.classList.remove('active');
            });

            // Show selected tab
            document.getElementById(tabName).classList.add('active');
            event.target.classList.add('active');
        }

        function toggleNonWorking(monthName, day, checkbox) {
            const row = checkbox.closest('tr');
            const timeInputs = row.querySelectorAll('input[type="time"]');
            const textInput = row.querySelector('input[type="text"]');

            if (checkbox.checked) {
                row.classList.add('non-working-day');
                timeInputs.forEach(input => {
                    input.value = '';
                    input.disabled = true;
                });
                textInput.placeholder = 'Holiday, Sick Day, etc.';
                row.querySelector('.raw-hours').textContent = '';
                row.querySelector('.hours-worked').textContent = '';
            } else {
                row.classList.remove('non-working-day');
                timeInputs.forEach(input => {
                    input.disabled = false;
                });
                textInput.placeholder = 'Notes...';
                row.querySelector('.raw-hours').textContent = '0.00';
                row.querySelector('.hours-worked').textContent = '0.00';
            }
            updateTotals(monthName);
        }

        function calculateHours(monthName, day) {
            const monthIndex = monthNames.indexOf(monthName);
            const rows = document.querySelectorAll(`#${monthName}-body tr:not(.total-row)`);
            const row = rows[day - 1];
            
            if (row.classList.contains('non-working-day')) return;

            const startInput = row.querySelectorAll('input[type="time"]')[0];
            const endInput = row.querySelectorAll('input[type="time"]')[1];
            
            if (startInput.value && endInput.value) {
                const start = new Date(`2000-01-01T${startInput.value}:00`);
                const end = new Date(`2000-01-01T${endInput.value}:00`);
                
                if (end < start) end.setDate(end.getDate() + 1);
                
                const rawHours = (end - start) / (1000 * 60 * 60);
                const date = new Date(2025, monthIndex, day);
                const dayOfWeek = date.getDay();
                
                let workedHours = rawHours;
                
                // Apply break deduction
                if ((dayOfWeek >= 1 && dayOfWeek <= 5 && rawHours >= 9.0) || 
                    (dayOfWeek === 6 && rawHours >= 6.5)) {
                    workedHours = rawHours - 0.5;
                }
                
                row.querySelector('.raw-hours').textContent = rawHours.toFixed(2);
                row.querySelector('.hours-worked').textContent = workedHours.toFixed(2);
                
                // Color coding
                const hoursCell = row.querySelector('.hours-worked');
                hoursCell.classList.remove('hours-short', 'hours-good');
                if (workedHours < 4 && workedHours > 0) {
                    hoursCell.classList.add('hours-short');
                } else if (workedHours >= 8) {
                    hoursCell.classList.add('hours-good');
                }
            }
            updateTotals(monthName);
        }

        function updateTotals(monthName) {
            const rows = document.querySelectorAll(`#${monthName}-body tr:not(.total-row)`);
            let totalRaw = 0;
            let totalWorked = 0;
            let workingDays = 0;

            rows.forEach(row => {
                if (row.classList.contains('non-working-day')) return;
                
                const rawHours = parseFloat(row.querySelector('.raw-hours').textContent) || 0;
                const workedHours = parseFloat(row.querySelector('.hours-worked').textContent) || 0;
                
                totalRaw += rawHours;
                totalWorked += workedHours;
                
                if (workedHours > 0) workingDays++;
            });

            document.getElementById(`${monthName}-raw-total`).textContent = totalRaw.toFixed(2);
            document.getElementById(`${monthName}-worked-total`).textContent = totalWorked.toFixed(2);
            document.getElementById(`${monthName}-total`).textContent = totalWorked.toFixed(2);
            document.getElementById(`${monthName}-days`).textContent = workingDays;
            document.getElementById(`${monthName}-avg`).textContent = workingDays > 0 ? (totalWorked / workingDays).toFixed(2) : '0.00';
            
            updateYearTotal();
        }

        function updateYearTotal() {
            let yearTotal = 0;
            monthNames.forEach(month => {
                const monthTotal = parseFloat(document.getElementById(`${month}-total`).textContent) || 0;
                yearTotal += monthTotal;
            });
            document.getElementById('year-total').textContent = yearTotal.toFixed(2) + ' hrs';
        }

        function fillWeekdays(monthName) {
            const monthIndex = monthNames.indexOf(monthName);
            const rows = document.querySelectorAll(`#${monthName}-body tr:not(.total-row)`);
            let filled = 0;
            
            rows.forEach((row, index) => {
                const day = index + 1;
                const date = new Date(2025, monthIndex, day);
                const dayOfWeek = date.getDay();
                
                if (dayOfWeek >= 1 && dayOfWeek <= 5 && !row.classList.contains('non-working-day')) {
                    const timeInputs = row.querySelectorAll('input[type="time"]');
                    timeInputs[0].value = '09:00';
                    timeInputs[1].value = '18:00';
                    calculateHours(monthName, day);
                    filled++;
                }
            });
            
            alert(`Filled ${filled} weekdays with 9:00-18:00!`);
        }

        function markHolidays(monthName) {
            const monthHolidays = holidays[monthName] || [];
            
            monthHolidays.forEach(holiday => {
                const rows = document.querySelectorAll(`#${monthName}-body tr:not(.total-row)`);
                const row = rows[holiday.day - 1];
                const checkbox = row.querySelector('input[type="checkbox"]');
                const notesInput = row.querySelector('input[type="text"]');
                
                checkbox.checked = true;
                notesInput.value = holiday.name;
                toggleNonWorking(monthName, holiday.day, checkbox);
            });
            
            alert(`UK bank holidays marked for ${monthName}!`);
        }

        function updateBossView() {
            // Collect all timesheet data from all months
            const completeData = {};
            
            monthNames.forEach(month => {
                const monthData = {};
                const monthIndex = monthNames.indexOf(month);
                const daysInThisMonth = daysInMonth[monthIndex];
                
                const rows = document.querySelectorAll(`#${month}-body tr:not(.total-row)`);
                
                for (let day = 1; day <= daysInThisMonth; day++) {
                    const row = rows[day - 1];
                    if (row) {
                        const checkbox = row.querySelector('input[type="checkbox"]');
                        const timeInputs = row.querySelectorAll('input[type="time"]');
                        const notesInput = row.querySelector('input[type="text"]');
                        
                        if (checkbox && checkbox.checked) {
                            monthData[day] = {
                                nonWorking: true,
                                notes: notesInput ? notesInput.value : ''
                            };
                        } else if (timeInputs[0] && timeInputs[1] && timeInputs[0].value && timeInputs[1].value) {
                            monthData[day] = {
                                startTime: timeInputs[0].value,
                                endTime: timeInputs[1].value,
                                notes: notesInput ? notesInput.value : ''
                            };
                        }
                    }
                }
                
                if (Object.keys(monthData).length > 0) {
                    completeData[month] = monthData;
                }
            });
            
            // Save complete data for boss view
            localStorage.setItem('timesheetData_2025', JSON.stringify(completeData));
            localStorage.setItem('timesheetData_lastSaved', new Date().toISOString());
            
            // Also save in the old format for compatibility
            const data = {
                lastUpdated: new Date().toISOString(),
                employeeName: 'Dominic',
                year: 2025,
                data: completeData
            };
            
            localStorage.setItem('shareableTimesheetData_2025', JSON.stringify(data));
            alert('Boss view updated successfully! Open boss-view.html to see the data.');
        }

        // Initialize all months when page loads
        document.addEventListener('DOMContentLoaded', function() {
            monthNames.forEach((month, index) => {
                createMonthContent(month, index);
                createMonthTimesheet(month, index);
            });
        });
    </script>
</body>
</html>
